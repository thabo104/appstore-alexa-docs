<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>Integrating Amazon Fling with an Existing iOS App that uses Google Cast | Fling SDK</title>
    
    <base target="_self">
    <meta name="description" content="Using our SDK, you can talk to Amazon Fire TV devices in a similar manner as you use Google Cast in your iOS apps to talk to Chromecast devices.  This... " />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" value="notranslate">
    <link rel="icon"  type="image/x-icon" href="favicon.ico">
<!--
    Licensed under the Apache License, Version 2.0 (the "License"). You may not use this file except in compliance with the License. A copy of the License is located at http://aws.amazon.com/apache2.0/ or in the "license" file accompanying this file. This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. This site also includes third-party software subject to various copyrights. The licenses for these third party components are referenced in the NOTICE file.
-->

    <!-- FontAwesome -->
   <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <!-- jQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <!-- Navgoco -->
    <script type="text/javascript" src="assets/js/jquery.navgoco.min.js"></script>
    <!-- Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- Anchor JS -->
    
        <script src="assets/js/anchor.min.js"></script>
    

    <script>
        $( document ).ready(function() {
            $("#docnavsidebar").navgoco({
                caretHtml: '',
                accordion: false,
                openClass: 'open', // open
                save: true,
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 300,
                    easing: 'swing'
                }
            });
            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#docnavsidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#docnavsidebar").navgoco('toggle', true);
            });
        });

    </script>
    <script src="assets/js/customscripts.js"></script>

    <script>
        $(document).ready(function() {
            $('[data-toggle=offcanvas]').click(function() {
                $('.row-offcanvas').toggleClass('active');
            });
        });
    </script>


    <!--Bootstrap -->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <style>
        ul#markdown-toc::before  {
        content: "Table of Contents"
         }
    </style>

</head>
<body class="default">
<div class="page-container">


    <!-- Top Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container topnavlinks">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="fa fa-bars fa-2x"></span>
                </button>
                <button type="button" class="navbar-toggle toggle-sidebar-button"  data-toggle="offcanvas" data-target=".sidebar-nav">
                    <span class="sidebarToggle fa fa-columns fa-2x"></span>
                </button>

                <a class="navbar-brand noCrossRef" href="https://developer.amazon.com/">
                    <img class="navbar-logo" src="amazonlogowhite.png"/>
            </div>

            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-left">

                    <!-- single item nav items appear here -->

                    
                    
                    
                    
                    <li><a href="index.html">Documentation Home</a></li>
                    
                    
                    <li><a href="https://github.com/amzn/appstore-alexa-docs/issues" class="noCrossRef">Log Doc Issue</a></li>
                    <li><a target="_blank" href="https://github.com/amzn/appstore-alexa-docs/blob/github-docs/_docs/firetv/fling/integrating-amazon-fling-with-an-existing-ios-cast-app.md" class="editButton noCrossRef"><i class="fa fa-github fa-lg"></i> Edit on GitHub</a></li>
                    
                    <li><a href="https://forums.developer.amazon.com/spaces/66/index.html" class="editButton noCrossRef">Fling SDK Forum</a></li>
                    
                    
                    

                    <!-- drop-down nav items appear here -->

                    


                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <!--start search -->
                        <!--
                        <div id="search-demo-container">
                            <form action="search.html" method="get">
                                <input type="text" id="search-input" placeholder="Global Search ..." name="query">
                            </form>
                        </div>
                        -->
                        <!-- end search-->
                    </li>
                </ul>
            </div>

        </div>


        <!-- /.container -->
    </nav>



<div class="container">
        <div class="row row-offcanvas row-offcanvas-left">

            <!-- sidebar -->
            <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">

                


<div class="mydocsidebar">
<div class="sidebar-inner">
<!-- search bar - uses Lunr.js  -->

<div class="sidebarSearchBar">
<form action="search-fling.html" method="get">
  <div class="input-group search">
    <input type="text" id="search-box" name="query" class="form-control" placeholder="Product Search ...">
    <div class="input-group-btn">
      <button class="btn btn-default" type="submit" value="search">
        <i class="glyphicon glyphicon-search"></i>
      </button>
    </div>
  </div>
</form>
</div>

<!-- end search bar -->


<div class="productTitle">Fling SDK</div>
<p class="external">
    <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
</p>



    <ul id="docnavsidebar" class="docnav">
    
    <li class="level1"><a href="#">Fling Overview</a>
        <ul>
            

            
            
            <li class="level1items"><a href="understanding-the-amazon-fling-service.html">Understanding the Amazon Fling Service</a></li>
            
            

            

            

            
            
            <li class="level1items"><a  class="noCrossRef" href="https://developer.amazon.com/public/resources/development-tools/sdk">Download the Fling SDK</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="amazon-fling-frequently-asked-questions.html">Amazon Fling Frequently Asked Questions</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">Settting Up Fling</a>
        <ul>
            

            
            
            <li class="level1items"><a href="setting-up-your-amazon-fling-development-environment-for-android.html">Setting Up Your Amazon Fling Development Environment for Android</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="setting-up-your-amazon-fling-development-environment-for-ios.html">Setting Up your Amazon Fling Development Environment for iOS</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">Integrating Fling with Android, iOS, and Fire TV Apps</a>
        <ul>
            

            
            
            <li class="level1items"><a href="integrating-amazon-fling-into-your-android-app.html">Integrating Amazon Fling into Your Android App</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="integrating-amazon-fling-into-your-ios-app.html">Integrating Amazon Fling into your iOS App</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="integrating-amazon-fling-into-your-fire-tv-app.html">Integrating Amazon Fling SDK into your Fire TV App</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="using-amazon-fling-with-android-mediarouter.html">Using Amazon Fling with Android MediaRouter</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="working-with-built-in-receiver-on-fire-tv.html">Working with the Built-in Receiver on the Fire TV Platform</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">Integrating Fling with Google Cast Apps</a>
        <ul>
            

            
            
            <li class="level1items"><a href="integrating-amazon-fling-with-cast.html">Integrating Amazon Fling with Apps that Use Google Cast</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="integrating-amazon-fling-with-an-existing-android-cast-app.html">Integrating Amazon Fling with an Existing Android App that Uses Google Cast</a></li>
            
            

            

            

            
            
            <li class="level1items open"><a href="integrating-amazon-fling-with-an-existing-ios-cast-app.html">Integrating Amazon Fling with an Existing iOS App that uses Google Cast</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">Fling UX</a>
        <ul>
            

            
            
            <li class="level1items"><a href="designing-amazon-fling-ux.html">Designing Amazon Fling UX</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">Remote Install</a>
        <ul>
            

            
            
            <li class="level1items"><a href="remote-install.html">Remote Install</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="android-remote-install.html">Integrating Remote Install into Your Android App</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="ios-remote-install.html">Integrating Remote Install into Your iOS App</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">Unity Plugins</a>
        <ul>
            

            
            
            <li class="level1items"><a href="unity-controller-plugin.html">Integrating the Amazon Fling Controller In Your Games</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="unity-player-plugin.html">Integrating the Amazon Fling Player In Your Games</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">API Docs</a>
        <ul>
            

            
            
            <li class="level1items"><a  class="noCrossRef" href="https://developer.amazon.com/public/binaries/content/assets/javadoc/whisperplay/javadocs/reference/packages.html">Android API Documentation</a></li>
            
            

            

            

            
            
            <li class="level1items"><a  class="noCrossRef" href="https://developer.amazon.com/public/binaries/content/assets/javadoc/whisperplay/objc-apidocs/index.html">iOS API Documentation</a></li>
            
            

            

            
        </ul>

        

    </li>
</ul>

<hr class="resourceSeparator"></hr>
<div class="relatedResources">Related Resources</div>
<ul id="entrypages">
        
        <li><a class="noCrossRef" href="/getting-started-developing-apps-and-games-for-amazon-fire-tv.html">Fire TV</a></li>
        
        <li><a class="noCrossRef" href="/fire-app-builder-overview.html">Fire App Builder</a></li>
        
        <li><a class="noCrossRef" href="/appstore-understanding-submission">Appstore Publishing</a></li>
        
        <li><a class="noCrossRef" href="/getting-started-with-iap">In-App Purchasing API</a></li>
        
        <li><a class="noCrossRef" href="/understanding-the-amazon-fling-service">Fling SDK</a></li>
        
        <li><a class="noCrossRef" href="">Developer Portal Forums</a></li>
        
    </li>
</ul>
</div>
</div>
<script>$("li.open").parents('li').toggleClass("open");</script>






            </div>

            <!-- main area -->
            <div class="col-xs-12 col-sm-9 main">

                    <div class="subtitle"><a href="http://developer.amazon.com" class="noCrossRef productSubtitle"> Home</a> > <a href="index.html" class="noCrossRef productSubtitle"> Documentation</a> > Fling SDK </div>

                    <h1>Integrating Amazon Fling with an Existing iOS App that uses Google Cast</h1>

                    <p>Using our SDK, you can talk to Amazon Fire TV devices in a similar manner as you use Google Cast in your iOS apps to talk to Chromecast devices.  This page outlines steps to modify an existing iOS app that uses the Google Cast framework to also fling to Amazon Fire TV.</p>

<p>Before you start, make sure you follow the steps at <a href="setting-up-your-amazon-fling-development-environment-for-ios.html">Setting Up your Amazon Fling Development Environment for iOS</a> to include the required frameworks in your project.  </p>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> All the code in this document is available in the <code class="highlighter-rouge">CastHelloVideo-ios-master</code> in the samples folder of the SDK package. This page calls out important code changes you need to make to an app that currently uses Google Cast.</div>

<h2 id="setup-and-initialization">Setup and Initialization</h2>

<p>To add this functionality in an app that currently uses Google Cast, add the required headers, and add listeners for player discovery and media status.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="err">#</span><span class="kn">import</span> <span class="err">&lt;</span><span class="nn">UIKit</span><span class="o">/</span><span class="n">UIKit</span><span class="o">.</span><span class="na">h</span><span class="o">&gt;</span>
<span class="err">#</span><span class="kn">import</span> <span class="err">&lt;</span><span class="nn">GoogleCast</span><span class="o">/</span><span class="n">GoogleCast</span><span class="o">.</span><span class="na">h</span><span class="o">&gt;</span>
<span class="err">#</span><span class="kn">import</span> <span class="err">&lt;</span><span class="nn">AmazonFling</span><span class="o">/</span><span class="n">DiscoveryController</span><span class="o">.</span><span class="na">h</span><span class="o">&gt;</span>
<span class="err">#</span><span class="kn">import</span> <span class="err">&lt;</span><span class="nn">AmazonFling</span><span class="o">/</span><span class="n">RemoteMediaPlayer</span><span class="o">.</span><span class="na">h</span><span class="o">&gt;</span>
<span class="err">#</span><span class="kn">import</span> <span class="err">&lt;</span><span class="nn">AmazonFling</span><span class="o">/</span><span class="n">MediaPlayerStatus</span><span class="o">.</span><span class="na">h</span><span class="o">&gt;</span>

<span class="nd">@interface</span> <span class="n">HGCVViewController</span> <span class="o">:</span> <span class="n">UIViewController</span><span class="o">&lt;</span><span class="n">GCKDeviceScannerListener</span><span class="o">,</span>
                                                 <span class="n">GCKDeviceManagerDelegate</span><span class="o">,</span>
                                                 <span class="n">GCKMediaControlChannelDelegate</span><span class="o">,</span>
                                                 <span class="n">UIActionSheetDelegate</span><span class="o">,</span>
                                                 <span class="n">DiscoveryListener</span><span class="o">,</span>
                                                 <span class="n">MediaPlayerStatusListener</span><span class="o">&gt;</span>
</code></pre>
</div>

<p>Start the discovery process when the application or view is loaded for the first time.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="o">-</span> <span class="o">(</span><span class="kt">void</span><span class="o">)</span><span class="n">viewDidLoad</span> <span class="o">{</span>
    <span class="o">[</span><span class="kd">super</span> <span class="n">viewDidLoad</span><span class="o">];</span>
    <span class="o">...</span>
    <span class="c1">// Initialize AmazonFling</span>
    <span class="n">self</span><span class="o">.</span><span class="na">controller</span> <span class="o">=</span> <span class="o">[[</span><span class="n">DiscoveryController</span> <span class="n">alloc</span><span class="o">]</span> <span class="n">init</span><span class="o">];</span>
    <span class="o">[</span><span class="n">self</span><span class="o">.</span><span class="na">controller</span> <span class="nl">searchPlayerWithId:</span><span class="err">@</span><span class="s">"amzn.thin.pl"</span> <span class="nl">andListener:</span><span class="n">self</span><span class="o">];</span>
    <span class="n">self</span><span class="o">.</span><span class="na">devices</span> <span class="o">=</span> <span class="o">[[</span><span class="n">NSMutableArray</span> <span class="n">alloc</span><span class="o">]</span> <span class="n">init</span><span class="o">];</span>
</code></pre>
</div>

<p>Your app receives the results of device discovery in overloaded callbacks.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="o">-</span> <span class="o">(</span><span class="kt">void</span><span class="o">)</span><span class="nl">deviceDiscovered:</span><span class="o">(</span><span class="n">id</span><span class="o">&lt;</span><span class="n">RemoteMediaPlayer</span><span class="o">&gt;)</span><span class="n">device</span> <span class="o">{</span>
    <span class="n">NSLog</span><span class="o">(</span><span class="err">@</span><span class="s">"deviceDiscovered=%@"</span><span class="o">,</span> <span class="o">[</span><span class="n">device</span> <span class="n">name</span><span class="o">]);</span>
    <span class="o">[</span><span class="n">self</span><span class="o">.</span><span class="na">devices</span> <span class="nl">addObject:</span><span class="n">device</span><span class="o">];</span>
    <span class="n">dispatch_async</span><span class="o">(</span><span class="n">dispatch_get_main_queue</span><span class="o">(),</span> <span class="o">^{</span>
        <span class="o">[</span><span class="n">self</span> <span class="n">updateButtonStates</span><span class="o">];</span>
    <span class="o">});</span>
<span class="o">}</span>

<span class="o">-</span> <span class="o">(</span><span class="kt">void</span><span class="o">)</span><span class="nl">deviceLost:</span><span class="o">(</span><span class="n">id</span><span class="o">&lt;</span><span class="n">RemoteMediaPlayer</span><span class="o">&gt;)</span><span class="n">device</span> <span class="o">{</span>
    <span class="n">NSLog</span><span class="o">(</span><span class="err">@</span><span class="s">"deviceLost=%@"</span><span class="o">,</span> <span class="o">[</span><span class="n">device</span> <span class="n">name</span><span class="o">]);</span>
    <span class="o">[</span><span class="n">self</span><span class="o">.</span><span class="na">devices</span> <span class="nl">removeObject:</span><span class="n">device</span><span class="o">];</span>
    <span class="n">dispatch_async</span><span class="o">(</span><span class="n">dispatch_get_main_queue</span><span class="o">(),</span> <span class="o">^{</span>
        <span class="o">[</span><span class="n">self</span> <span class="n">updateButtonStates</span><span class="o">];</span>
    <span class="o">});</span>
<span class="o">}</span>

<span class="o">-</span> <span class="o">(</span><span class="kt">void</span><span class="o">)</span><span class="n">discoveryFailure</span> <span class="o">{</span>
    <span class="n">NSLog</span><span class="o">(</span><span class="err">@</span><span class="s">"Discovery failure"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Your app gets media playback status in another callback:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="o">-</span> <span class="o">(</span><span class="kt">void</span><span class="o">)</span><span class="nl">onStatusChange:</span><span class="o">(</span><span class="n">MediaPlayerStatus</span> <span class="o">*)</span><span class="n">status</span> <span class="nl">positionChangedTo:</span><span class="o">(</span><span class="kt">long</span> <span class="kt">long</span><span class="o">)</span><span class="n">position</span> <span class="o">{</span>
    <span class="n">NSLog</span><span class="o">(</span><span class="err">@</span><span class="s">"Applciation: onStatusChange Called"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
</div>

<h2 id="lifecycle-event-handling">Lifecycle Event Handling</h2>

<p>Your app should suspend device discovery when the app goes into the background, and resume when it comes to foreground:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="o">-</span> <span class="o">(</span><span class="kt">void</span><span class="o">)</span><span class="nl">viewDidAppear:</span><span class="o">(</span><span class="n">BOOL</span><span class="o">)</span><span class="n">animated</span> <span class="o">{</span>
    <span class="o">[</span><span class="kd">super</span> <span class="nl">viewDidAppear:</span><span class="n">animated</span><span class="o">];</span>
    <span class="n">NSLog</span><span class="o">(</span><span class="err">@</span><span class="s">"viewDidAppear"</span><span class="o">);</span>
    <span class="o">[</span><span class="n">self</span><span class="o">.</span><span class="na">controller</span> <span class="n">resume</span><span class="o">];</span>
<span class="o">}</span>

<span class="o">-</span> <span class="o">(</span><span class="kt">void</span><span class="o">)</span><span class="nl">viewWillDisappear:</span><span class="o">(</span><span class="n">BOOL</span><span class="o">)</span><span class="n">animated</span> <span class="o">{</span>
    <span class="o">[</span><span class="kd">super</span> <span class="nl">viewWillDisappear:</span><span class="n">animated</span><span class="o">];</span>
    <span class="n">NSLog</span><span class="o">(</span><span class="err">@</span><span class="s">"viewWillDisappear"</span><span class="o">);</span>
    <span class="o">[</span><span class="n">self</span><span class="o">.</span><span class="na">devices</span> <span class="n">removeAllObjects</span><span class="o">];</span>
    <span class="o">[</span><span class="n">self</span><span class="o">.</span><span class="na">controller</span> <span class="n">close</span><span class="o">];</span>
<span class="o">}</span>
</code></pre>
</div>

<h2 id="presenting-amazon-fire-tv-devices-to-the-user">Presenting Amazon Fire TV Devices to the User</h2>

<p>You can get a list of the names of the remote Amazon Fire TV devices and present those names to the user with the <code class="highlighter-rouge">RemoteMediaPlayer</code> proxy object:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="o">-</span> <span class="o">(</span><span class="kt">void</span><span class="o">)</span><span class="nl">chooseDevice:</span><span class="o">(</span><span class="n">id</span><span class="o">)</span><span class="n">sender</span> <span class="o">{</span>
<span class="o">...</span>
    <span class="n">UIActionSheet</span> <span class="o">*</span><span class="n">sheet</span> <span class="o">=</span>
        <span class="o">[[</span><span class="n">UIActionSheet</span> <span class="n">alloc</span><span class="o">]</span> <span class="nl">initWithTitle:</span><span class="n">NSLocalizedString</span><span class="o">(</span><span class="err">@</span><span class="s">"Connect to Device"</span><span class="o">,</span> <span class="n">nil</span><span class="o">)</span>
                                    <span class="nl">delegate:</span><span class="n">self</span>
                           <span class="nl">cancelButtonTitle:</span><span class="n">nil</span>
                      <span class="nl">destructiveButtonTitle:</span><span class="n">nil</span>
                           <span class="nl">otherButtonTitles:</span><span class="n">nil</span><span class="o">];</span>

      <span class="k">for</span> <span class="o">(</span><span class="n">id</span><span class="o">&lt;</span><span class="n">RemoteMediaPlayer</span><span class="o">&gt;</span> <span class="n">device</span> <span class="n">in</span> <span class="n">self</span><span class="o">.</span><span class="na">devices</span><span class="o">)</span> <span class="o">{</span>
          <span class="o">[</span><span class="n">sheet</span> <span class="nl">addButtonWithTitle:</span><span class="o">[</span><span class="n">device</span> <span class="n">name</span><span class="o">]];</span>
      <span class="o">}</span>
</code></pre>
</div>

<h2 id="connect-to-the-player">Connect to the Player</h2>

<p>To connect your app to a player, add a status listener.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="o">-</span> <span class="o">(</span><span class="kt">void</span><span class="o">)</span><span class="n">connectToFlingDevice</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">self</span><span class="o">.</span><span class="na">selectedFlingPlayer</span> <span class="o">==</span> <span class="n">nil</span><span class="o">)</span>
        <span class="k">return</span><span class="o">;</span>
    <span class="n">__weak</span> <span class="n">HGCVViewController</span> <span class="o">*</span><span class="n">selfWeak</span> <span class="o">=</span> <span class="n">self</span><span class="o">;</span>
    <span class="o">[</span><span class="n">self</span><span class="o">.</span><span class="na">selectedFlingPlayer</span> <span class="nl">addStatusListener:</span><span class="n">self</span> <span class="o">:^(</span><span class="n">NSException</span> <span class="o">*</span><span class="n">failure</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">NSLog</span><span class="o">(</span><span class="err">@</span><span class="s">"Failed to add status listener.  Error:%@"</span><span class="o">,</span> <span class="n">failure</span><span class="o">.</span><span class="na">reason</span><span class="o">);</span>
    <span class="o">}</span> <span class="o">:</span> <span class="o">^{</span>
        <span class="n">dispatch_async</span><span class="o">(</span><span class="n">dispatch_get_main_queue</span><span class="o">(),</span> <span class="o">^{</span>
            <span class="n">selfWeak</span><span class="o">.</span><span class="na">isConnectedToFlingPlayer</span> <span class="o">=</span> <span class="n">YES</span><span class="o">;</span>
            <span class="o">[</span><span class="n">selfWeak</span> <span class="n">updateButtonStates</span><span class="o">];</span>
        <span class="o">});</span>
    <span class="o">}];</span>
<span class="o">}</span>
</code></pre>
</div>

<h2 id="get-media-playback-status-on-remote-device">Get Media Playback Status on Remote Device</h2>

<p>Once your app is connected to a remote player it can perform remote operations, such as fetch the media playback status. Communication with the Amazon Fire TV occurs through RemoteMediaPlayer proxy object. Since the SDK provides asynchronous methods for fluid UI, you may have to use serializing mechanisms in place of the Google Cast API calling paradigms you had previously been using.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="o">-</span> <span class="o">(</span><span class="n">NSInteger</span><span class="o">)</span><span class="n">flingPlaybackStatus</span> <span class="o">:</span> <span class="o">(</span><span class="n">UIActionSheet</span><span class="o">*)</span> <span class="n">sheet</span> <span class="o">{</span>
    <span class="n">NSString</span> <span class="o">*</span><span class="n">friendlyName</span> <span class="o">=</span> <span class="o">[</span><span class="n">NSString</span> <span class="nl">stringWithFormat:</span><span class="n">NSLocalizedString</span><span class="o">(</span><span class="err">@</span><span class="s">"Casting to %@"</span><span class="o">,</span> <span class="n">nil</span><span class="o">),</span>
                              <span class="o">[</span><span class="n">self</span><span class="o">.</span><span class="na">selectedFlingPlayer</span> <span class="n">name</span><span class="o">]];</span>
    <span class="n">sheet</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">friendlyName</span><span class="o">;</span>

    <span class="n">__block</span> <span class="n">NSString</span><span class="o">*</span> <span class="n">mediaStatus</span> <span class="o">=</span> <span class="n">nil</span><span class="o">;</span>
    <span class="n">NSCondition</span> <span class="o">*</span><span class="n">waitHandle</span> <span class="o">=</span> <span class="o">[</span><span class="n">NSCondition</span> <span class="k">new</span><span class="o">];</span>
    <span class="o">[</span><span class="n">waitHandle</span> <span class="n">lock</span><span class="o">];</span>
    <span class="o">[</span><span class="n">self</span><span class="o">.</span><span class="na">selectedFlingPlayer</span> <span class="nl">getStatus:</span><span class="o">^(</span><span class="n">NSException</span> <span class="o">*</span><span class="n">failure</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">NSLog</span><span class="o">(</span><span class="err">@</span><span class="s">"Failed to get status.  Error:%@"</span><span class="o">,</span> <span class="n">failure</span><span class="o">.</span><span class="na">reason</span><span class="o">);</span>
        <span class="o">[</span><span class="n">waitHandle</span> <span class="n">signal</span><span class="o">];</span>
    <span class="o">}</span> <span class="o">:^(</span><span class="n">MediaPlayerStatus</span> <span class="o">*</span><span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">mediaStatus</span> <span class="o">=</span> <span class="o">[</span><span class="n">NSString</span> <span class="nl">stringWithString:</span><span class="o">[</span><span class="n">self</span> <span class="nl">mapState:</span><span class="o">[</span><span class="n">result</span> <span class="n">getState</span><span class="o">]]];</span>
        <span class="o">[</span><span class="n">waitHandle</span> <span class="n">signal</span><span class="o">];</span>
    <span class="o">}];</span>
    <span class="o">[</span><span class="n">waitHandle</span> <span class="n">wait</span><span class="o">];</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">mediaStatus</span> <span class="o">!=</span> <span class="n">nil</span><span class="o">)</span> <span class="o">{</span>
        <span class="o">[</span><span class="n">sheet</span> <span class="nl">addButtonWithTitle:</span><span class="n">mediaStatus</span><span class="o">];</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">mediaStatus</span> <span class="o">==</span> <span class="n">nil</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="mi">1</span><span class="o">;</span>
<span class="o">}</span>
</code></pre>
</div>

<h2 id="flinging-media-to-the-player">Flinging Media to the Player</h2>

<p>If the selected device is a player, the controller application can set the media playback source and metadata:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="o">-</span> <span class="o">(</span><span class="kt">void</span><span class="o">)</span><span class="n">flingLoadMedia</span> <span class="o">{</span>
    <span class="o">[[</span><span class="n">self</span><span class="o">.</span><span class="na">selectedFlingPlayer</span> <span class="nl">setMediaSourceToURL:</span><span class="err">@</span><span class="s">"http://videos.acme.com/url_to_video"</span>
                                         <span class="nl">metaData:</span><span class="err">@</span><span class="s">"{\"title\" : \"Big Buck Bunny (2008)\"}"</span> <span class="c1">// meta data in JSON format</span>
                                         <span class="nl">autoPlay:</span><span class="n">YES</span>  <span class="c1">// auto-play</span>
                              <span class="nl">andPlayInBackground:</span><span class="n">NO</span>   <span class="c1">// play in background</span>
    <span class="o">]</span> <span class="nl">continueWithBlock:</span><span class="o">^</span><span class="n">id</span><span class="o">(</span><span class="n">BFTask</span> <span class="o">*</span><span class="n">task</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">task</span><span class="o">.</span><span class="na">error</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">NSLog</span><span class="o">(</span><span class="err">@</span><span class="s">"Failure to set media source - %@"</span><span class="o">,</span> <span class="n">task</span><span class="o">.</span><span class="na">error</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">nil</span><span class="o">;</span>
    <span class="o">}];</span>
</code></pre>
</div>




            </div>
        </div><!--/.container-->


    </div><!--/.page-container-->
    
    <div class="footertop">
    <div class="container">
        <div class="col-md-6">
            <p></p>
        </div>
        <div class="col-md-6">
            <ul class="bottom_ul">
        </div>
    </div>
</div>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-sm-6 footerleft ">
                <div class="logofooter"> About the Developer Portal</div>
                <p>The Amazon Developer Portal provides documentation for developers creating apps for the Amazon
                    appstore, including Alexa skills. Apps include streaming media apps, game apps, skills, and more. </p>

            </div>
            <div class="col-md-2 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Links</h6>
                <ul class="footer-ul">
                    <li><a class="noCrossRef" href="https://developer.amazon.com/"> Developer Portal</a></li>
                    <li><a class="noCrossRef" href="/index.html">Documentation Home</a></li>
                    <li class="noCrossRef"><a href="https://developer.amazon.com/support"> Support</a></li>
                    <li class="noCrossRef"><a href="https://aws.amazon.com/documentation/"> AWS docs</a></li>
                    <li class="noCrossRef"><a href="https://www.amazon.com/mobile-apps/b?ie=UTF8&node=2350149011"> Amazon Appstore</a></li>
                </ul>
            </div>

            <div class="col-md-3 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Amazon News</h6>
                <ul class="footer-ul">
                    <li class="noCrossRef"><a href="https://developer.amazon.com/blogs"> Blog</a></li>
                    <li class="noCrossRef"><a href="https://www.youtube.com/channel/UCT9ApARFgQJOeqD-ygmxnJQ"> YouTube</a></li>
                    <li class="noCrossRef"><a href="https://twitter.com/AmazonAppDev"> Twitter</a></li>
                    <li class="noCrossRef"><a href="http://phx.corporate-ir.net/phoenix.zhtml?p=irol-mediahome&c=176060"> Amazon Press Room</a></li>
                </ul>
            </div>

            <div class="col-md-3 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Forums</h6>
                <ul class="footer-ul">
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/23/index.html"> Alexa Skills Kit</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/33/index.html"> Smart Home Skill API</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/38/index.html"> Alexa Voice Service</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/167/index.html"> Appstore</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/12/index.html"> Underground</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/166/index.html"> Fire Devices</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/61/index.html"> Dash</a></li>
                </ul>
            </div>
        </div>
    </div>
    </div>
</footer>
<!--subfooter start from here -->

<div class="copyright">
    <div class="container">
        <div class="col-md-12">
            <p>© 1996-2017, Amazon.com, Inc. or its affiliates</p>
        </div>
    </div>
</div>

    
    <!--scripts loaded here-->



</body>

</html>
